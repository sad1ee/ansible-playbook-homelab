services:
  qbittorrent:
    image: lscr.io/linuxserver/qbittorrent:latest

    labels:
      dev.dozzle.group: Acquisition

    environment:
      PUID: "{{ container_puid }}"
      PGID: "{{ container_pgid }}"
      TZ: "{{ container_tz }}"
      WEBUI_PORT: "{{ container_webui_port.qbittorrent }}"

    volumes:
      - "{{ container_path.qbittorrent}}:/config"
      - "{{ container_path.media }}:/media"

    depends_on:
      gluetun:
        condition: service_healthy

    healthcheck:
      test: [CMD, ping, -c, "1", gluetun]
      interval: 300s
      timeout: 30s
      retries: "3"
      start_period: 60s
      start_interval: 2s

    container_name: qbittorrent
    restart: unless-stopped

    network_mode: service:gluetun
